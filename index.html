<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chatbox and Data Viz</title>
  <link rel="stylesheet" href="./css/style.css">
  <!--  <script type="module" src="socket.js"></script>-->
  <script type="module" src="./src/chatbox.js"></script>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
    }
    td {
      border: 1px solid black;
      padding: 8px;
      text-align: left;
    }
    /* Add space between columns */
    td:not(:last-child) {
      padding-right: 20px;
    }
    pop-up {
      margin-top: -70px; /* Adjust the value as needed */
    }
  </style>
</head>

<body style="display: flex;">
  <!-- Chatbox container -->
  <main id="main-container">
    <div id="chat-container">
      <div id="chat">
      </div>
      <div id="input-container">
        <input id="input" type="text" placeholder="Type a message...">
        <button id="send">
          <svg width="48" height="44" viewBox="0 0 48 44" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6 5.5L12 22L6 38.5L44 22L6 5.5Z" stroke="black" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
            <path d="M12 22H44" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
      </div>
    </div>
    <!-- Data Visualization container -->
    <div id="viz-container">
      <div id="title">
        <h1>Data Visualization Bot</h1>
      </div>

      <canvas id="viz" style="width: 100%;height: 90%;"></canvas>
      <script type="module" src="./src/viz.js"></script>

      <div id="gallery">
        <div id="pop-up">
          <div id="pop-up-button"><svg id="pop-up-arrow" width="14" height="12" viewBox="0 0 14 8" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path d="M0.999999 1L7 7L13 1" stroke="black" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
          </div>
          <div id="menu-item-container">
            <table>
              <tr>
                <td>Age</td>
                <td id="FakePatient_age"></td>
                <td>nihss_score</td>
                <td id="nihss_score"></td>
                <td>covid_test</td>
                <<td id="covid_test"></td>
              </tr>
              <tr>
                <td>door_to_imaging</td>
                <td id="door_to_imaging"></td>
                <td>bleeding_source</td>
                <td id="bleeding_source"></td>
                <td>door_to_needle</td>
                <td id="door_to_needle"></td>
              </tr>
              <tr>
                <td>risk_smoker</td>
                <td id="risk_smoker"></td>
                <td>cholesterol</td>
                <td id="cholesterol"></td>
              </tr>
            </table>
          </div>
        </div>
      </div>

    </div>

  </main>
  <script>
    fetch('./data/args.json')
      .then(response => response.json())
      .then(data => {
        // Update table with JSON data
        document.getElementById('FakePatient_age').innerText = args.visualization.FakePatient_age;
        document.getElementById('FakePatient_nihss_score').innerText = data.nihss_score;
        document.getElementById('FakePatient_covid_test').innerText = data.covid_test;
        document.getElementById('FakePatient_door_to_imaging').innerText = data.door_to_imaging;
        document.getElementById('FakePatient_bleeding_source').innerText = data.bleeding_source;
        document.getElementById('FakePatient_door_to_needle').innerText = data.door_to_needle;
        document.getElementById('FakePatient_risk_smoker').innerText = data.risk_smoker;
        document.getElementById('FakePatient_cholesterol').innerText = data.cholesterol;
      })
      .catch(error => console.error('Error fetching JSON:', error));
  </script>
</body>

</html>
